<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="search" type="application/opensearchdescription+xml" title="ModDota" href="/opensearch.xml"><title data-react-helmet="true">DOTAScenePanel | ModDota</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="DOTAScenePanel | ModDota"><meta data-react-helmet="true" name="description" content="In this tutorial we&#x27;ll go through the tricks you can do with the undocumented DOTAScenePanel class in panorama."><meta data-react-helmet="true" property="og:description" content="In this tutorial we&#x27;ll go through the tricks you can do with the undocumented DOTAScenePanel class in panorama."><meta data-react-helmet="true" property="og:url" content="https://moddota.com/panorama/dotascenepanel"><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://moddota.com/panorama/dotascenepanel"><link rel="stylesheet" href="/styles.32eaf7f3.css">
<link rel="stylesheet" href="/main.49954070.css">
<link rel="preload" href="/styles.d89c53e5.js" as="script">
<link rel="preload" href="/runtime~main.6abb769e.js" as="script">
<link rel="preload" href="/main.2e2eb0b8.js" as="script">
<link rel="preload" href="/1.607a12f9.js" as="script">
<link rel="preload" href="/2.90bd4da8.js" as="script">
<link rel="preload" href="/1be78505.f231235a.js" as="script">
<link rel="preload" href="/ec1ed54d.18c72637.js" as="script">
<link rel="preload" href="/7bd703ab.d1393193.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/logo-80x80.png"><strong class="navbar__title">ModDota</strong></a><a class="navbar__item navbar__link" href="/tutorials">Tutorials</a><a href="https://dota.tools/vscripts/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Lua API</a><a href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama/Javascript/API" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Panorama API</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/gRmZgvz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/logo-80x80.png"><strong class="navbar__title">ModDota</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/tutorials">Tutorials</a></li><li class="menu__list-item"><a href="https://dota.tools/vscripts/" target="_blank" rel="noopener noreferrer" class="menu__link">Lua API</a></li><li class="menu__list-item"><a href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama/Javascript/API" target="_blank" rel="noopener noreferrer" class="menu__link">Panorama API</a></li><li class="menu__list-item"><a href="https://discord.gg/gRmZgvz" target="_blank" rel="noopener noreferrer" class="menu__link">Discord</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1jis"><div class="docSidebarContainer_1kjN"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/scripting-introduction">Scripting Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Abilities, items, modifiers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/ability-keyvalues">Ability KeyValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/item-keyvalues">Item KeyValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/the-importance-of-abilityspecial-values">The importance of AbilitySpecial values</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/passing-abilityspecial-values-into-lua">Passing AbilitySpecial values into Lua</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/abilityduration-tooltips">AbilityDuration tooltips</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/simple-custom-ability">Simple Custom Ability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/creating-innate-abilities">Creating innate (available from level 1) abilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/making-any-ability-use-charges">Making any ability use charges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/calling-spells-with-setcursor">Calling Spells with SetCursor</a></li><li class="menu__list-item"><a href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Lua_Abilities_and_Modifiers" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Lua_Abilities_and_Modifiers" tabindex="-1">Lua Abilities and Modifiers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-item-tutorial">Lua Item Tutorial</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Lua Modifiers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/1">Extending Hero/NPC API with lua modifiers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/2">Linken&#x27;s Sphere &amp; Lotus Orb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/3">Transformations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/4">Enchanting Trees</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/reutilizing-built-in-modifiers">Reutilizing Built-In Modifiers</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Datadriven</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/datadriven-ability-events-modifiers">DataDriven Ability Events &amp; Modifiers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/all-about-the-target">All about the Target</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/channeling-animations">Channeling Animations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/invisibility-ability-example">Invisibility Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/illusion-ability-example">Illusion Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/rotate-ability-example">Rotate Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/point-channeling-aoe-ability-example">Point Channeling AoE Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/apply-hero-and-creep-modifier-durations">Apply Hero and Creep modifier durations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/physics-ability-example-exorcism">Physics Ability Example - Exorcism</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Units</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/unit-keyvalues">Unit KeyValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/unit-producing-buildings">Unit producing buildings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/creating-units-with-a-duration">Creating units with a duration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/adding-a-very-simple-ai-to-units">Adding a Very Simple AI to Units</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/simple-neutral-ai">Writing a simple AI for neutrals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/create-creature-attachwearable-blocks-directly-from-the-keyvalues">Create Creature AttachWearable blocks directly from the keyvalues</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Scripting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/custom-mana-system">Custom Mana System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/item-restrictions-requirements">Item Restrictions &amp; Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/item-drop-system">Item Drop System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/making-a-rpg-like-looting-chest">Making a &quot;rpg-like&quot; looting chest</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/scripted-shop-spawning">Scripted Shop Spawning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/lava-damage">Lava damage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/using-dota-filters">Using the order filter and other filters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/particle-attachment">Particle Attachment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scripting/precache-fixing-and-avoiding-issues">Precache, Fixing and avoiding issues</a></li><li class="menu__list-item"><a href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Nettables" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Nettables" tabindex="-1">Custom NetTables</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Panorama UI</a><ul class="menu__list"><li class="menu__list-item"><a href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama" tabindex="0">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/panorama/inclusive-panorama-ui">Inclusive Panorama UI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/panorama/introduction-to-panorama-ui-with-typescript">Introduction to Panorama UI with TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/panorama/keybindings">Keybindings</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/panorama/dotascenepanel">DOTAScenePanel</a></li><li class="menu__list-item"><a href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Game_Setup" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Game_Setup" tabindex="0">Custom Game Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/panorama/hiding-hud-with-sethudvisible">Hiding HUD with SetHUDVisible</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Assets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/asset-file-type-reference">Asset File Type Reference</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Maps</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/maps/hammer-tutorials">Hammer Tutorials</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/maps/making-skip-clip-blocks-out-of-models">Making skip/clip blocks out of models</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Models</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/importing-custom-models">Importing custom models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/mdl-to-vmdl-conversion">MDL to VMDL Conversion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/adding-hitbox-to-models-without-a-bone">Adding Hitbox to Models without a Bone</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/importing-models-and-using-material-editor">Importing models and using the material editor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/exporting-models-and-materials-textures">Exporting Models and Materials/Textures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/custom-hero-models-materials-animations">Custom Hero models, materials and animations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Particles</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/particle-basics">Particle Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/chaos-wave-particle">Chaos Wave Particle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/falling-cherry-blossom-petal-for-spring-mood-particle">Falling cherry blossom petal for spring mood particle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/volcano-particle">Volcano Particle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/status-effects">Status Effects</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/custom-sounds">Custom Sounds</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/extracting-and-compiling-vtex-files">Extracting and Compiling VTEX files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/custom-minimap-icons">Custom Minimap Icons</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tools/useful-console-commands">Useful Console Commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tools/setting-up-your-addon-with-github">Setting Up Your Addon With GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tools/combining-kv-files-using-base">Combining KV files using #base</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/contribute">Contribute</a></li></ul></div></div></div><main class="docMainContainer_3j_A"><div class="container padding-vert--lg docItemWrapper_1Hme"><div class="row"><div class="col docItemCol_2AGf"><div class="docItemContainer_1tAC"><article><div style="margin-top:-10px;margin-bottom:10px"><div class="row"><div class="col"><a href="https://github.com/ModDota/moddota.github.io/edit/source/_articles/panorama/dotascenepanel.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Created on <time datetime="2016-04-02T00:00:00.000Z" class="docLastUpdatedAt_1gIo">4/2/2016</time> by <strong><a href="https://steamcommunity.com/profiles/76561198046920629">DoctorGester</a></strong></small></em></div></div></div><header><h1 class="docTitle_cWlf">DOTAScenePanel</h1></header><div class="markdown"><p>In this tutorial we&#x27;ll go through the tricks you can do with the undocumented DOTAScenePanel class in panorama.</p><p>Now, you might have seen its usage if you looked through the sources in the main menu. This panel allows us to display 3D content in panorama. You might have tried using it yourself. It&#x27;s pretty easy to setup a simple panel to display a unit, with code like</p><p><code>&lt;DOTAScenePanel style=&quot;width:400px;height:400px;&quot; unit=&quot;npc_dota_hero_sven&quot; particleonly=&quot;false&quot;/&gt;</code></p><p>Please note <code>particleonly=&#x27;false&#x27;</code> is required for <code>DOTAScenePanel</code> to display anything other then particles properly.</p><p>Code like this is used to display heroes in the armory. This panel is also has no custom dynamic properties, meaning that we can&#x27;t change the unit after creating a panel.</p><p>In armory, heroes models can be rotated, and this behaviour can be enabled with <code>allowrotation=&quot;true&quot;</code> settled. However, this parameter is not compatible with custom background maps.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="background-maps"></a>Background maps<a aria-hidden="true" tabindex="-1" class="hash-link" href="#background-maps" title="Direct link to heading">#</a></h2><p>But wait, there&#x27;s more! DOTAScenePanel accepts the &quot;map&quot; parameter, which points to a specific type of vmaps - background maps. You can find them in asset browser in background folder. Those vmaps only accept a specific set of entities and are shown in panorama using cameras. Let&#x27;s follow up by creating a simple background map.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="setting-up-the-map"></a>Setting up the map<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-up-the-map" title="Direct link to heading">#</a></h3><p>Start up hammer editor and create a new map. Save it in your maps folder as &#x27;background.vmap&#x27;. Go to Map -&gt; Map Properties (Ctrl-Shift-P) and check the &#x27;Compile as background map&#x27; checkbox.</p><p>Use the Entity Tool (Shift-E) and choose the <code>prop_dynamic</code> entity, then click somewhere in the world to place it.</p><p>Select that newly placed entity in the outliner and change its <code>World Model</code> property to <code>models/courier/donkey_unicorn/donkey_unicorn.vmdl</code>.</p><p>Now you&#x27;ve got your movie star ready to be displayed. You can also change the <code>Default Animation</code> field to <code>idle</code> or any string from its model entries.</p><p>Now we&#x27;ve got <em>action</em>, but still missing <em>lights</em> and <em>camera</em>. Let&#x27;s begin with light - with the Entity Tool (Shift-E), create a <code>env_global_light</code> entity. Change it&#x27;s name to <code>light</code>, for example.</p><p>Same as <code>env_global_light</code>, create a <code>point_camera</code> entity.
Select your newly created camera, move your hammer camera in such way that you can see the donkey and click <code>View - Align Selection to Active Camera</code>.</p><p>As the last step select your camera and give it a name in the properties, like <code>camera1</code>.</p><p>Save your map and build it (F9).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="setting-up-panorama"></a>Setting up panorama<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-up-panorama" title="Direct link to heading">#</a></h3><p>I won&#x27;t describe how to set up a basic panorama environment, if you are having issues with displaying simple panels, refer to <a href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama" target="_blank" rel="noopener noreferrer">https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama</a> Once you&#x27;ve ready to go, simply add <code>&lt;DOTAScenePanel style=&quot;width:400px;height:400px;&quot; map=&quot;background&quot; light=&quot;light&quot; camera=&quot;camera1&quot; particleonly=&quot;false&quot;/&gt;</code> to your XML, you should see your donkey movie star in its full glory. Shouldn&#x27;t take you more than 10 minutes.</p><p style="position:relative;padding-bottom:75%"><iframe src="https://gfycat.com/ifr/BlackSameAoudad" scrolling="no" frameborder="0" allowfullscreen="" width="100%" height="100%" style="position:absolute;top:0;left:0"></iframe></p><p>Now let&#x27;s get to the advanced part.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-part-where-magic-gets-real"></a>The part where magic gets real<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-part-where-magic-gets-real" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="units-with-cosmetics"></a>Units with cosmetics<a aria-hidden="true" tabindex="-1" class="hash-link" href="#units-with-cosmetics" title="Direct link to heading">#</a></h3><p>We can easily build up a &quot;unit&quot; like scene, using the <code>portrait_world_unit</code> entity type. This entity supports all kinds of units and also cosmetic item definitions. The quirk here is that you have to enter the raw properties editing mode to set displayed entity to a hero. Item definitions property all refer to different loadout slots and accept item IDs. Item ID list can be found <a href="https://github.com/dotabuff/d2vpk/blob/master/dota_pak01/scripts/items/items_game.txt">here</a>.</p><p><img src="https://i.imgur.com/ZsmLQA3.png" alt="Lina is awesome" title="Example"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="multiple-cameras"></a>Multiple cameras<a aria-hidden="true" tabindex="-1" class="hash-link" href="#multiple-cameras" title="Direct link to heading">#</a></h3><p>This is pretty straightforward, <code>DOTAScenePanel</code> also accepts the <code>camera</code> parameter in the definition, which will try to find the camera with the provided name.</p><p><img src="https://puu.sh/o3Gv7/783de89488.jpg" alt="https://puu.sh/o3Gv7/783de89488.jpg"></p><p>Important to note, compiling the map again does change the look of the panorama panel without restarting the map, but you can&#x27;t change it at runtime. You&#x27;ll understand how to achieve the same result in the following parts.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dynamic-layout-loading"></a>Dynamic layout loading<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dynamic-layout-loading" title="Direct link to heading">#</a></h3><p>Since the only thing DOTAScenePanel respects is its own layout definition, we will have to provide it from the start. Fortunately we can load layout from string, while altering the definition.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> camera </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;camera1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> style </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;width:400px;height:400px;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">someCondition</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    camera </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;camera2&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> sceneContainer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;#SomeContainer&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">sceneContainer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">BCreateChildren</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;DOTAScenePanel style=&#x27;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> style </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27; map=&#x27;background&#x27; particleonly=&#x27;false&#x27; light=&#x27;light&#x27; camera=&#x27;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> camera </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;&quot;</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>As you might have noticed, you have to wrap the whole thing in &#x27;&#x27;, while also providing the initial container for the layout. Pretty terrible, but for now it seems like the only way.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="firing-io-events"></a>Firing IO events<a aria-hidden="true" tabindex="-1" class="hash-link" href="#firing-io-events" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="animation"></a>Animation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#animation" title="Direct link to heading">#</a></h4><p>Now the REAL fun starts. Dashboard source code uses the <code>DOTAGlobalSceneFireEntityInput</code> event which starts the particles on the home button, for example. This event is basically a <code>DoEntFire</code> specifically for DOTAScenePanel.</p><p>For example usage, set up a simple <code>&lt;DOTAScenePanel id=&quot;scene&quot; style=&quot;width:400px;height:400px;&quot; map=&quot;background&quot;/&gt;</code> (notice the <code>id</code>, it&#x27;s very important!) once again. But this time, alter the map and change the donkey <code>Name</code> property to <code>donkey</code>, don&#x27;t forget to rebuild the map.</p><p>Now make a basic panorama button, and give it <code>onactivate=&quot;DOTAGlobalSceneFireEntityInput(scene, donkey, SetAnimation, death)&quot;</code>.</p><p>Now if you&#x27;ve done everything correctly, your donkey should play his death animation every time you press the button. How? Magic. But really though, refer to the <em>Inputs</em> part of <a href="https://developer.valvesoftware.com/wiki/Prop_dynamic" target="_blank" rel="noopener noreferrer">this page</a>. Notice the <code>SetAnimation</code> input.</p><p>Also notice how we&#x27;ve used <code>DOTAGlobalSceneFireEntityInput</code> in onactivate as if it were a real function, which it isn&#x27;t. That&#x27;s because panel events are special cornflakes. In panorama javascript you have to use <code>$.DispatchEvent(&quot;DOTAGlobalSceneFireEntityInput&quot;, arguments)</code> to achieve the same result.</p><p>Example</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">DispatchEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DOTAGlobalSceneFireEntityInput&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;LightBuilder&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;donkey&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SetAnimation&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;spawn&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="scripts-scripts"></a>Scripts? Scripts!<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scripts-scripts" title="Direct link to heading">#</a></h4><p>If you were a good boy, you might have noticed the <code>RunScriptFile</code> and <code>RunScriptCode</code> inputs.</p><p>Now make a <code>donkey.lua</code> file in your <code>vscripts</code> folder and put a simple <code>print(&quot;Onions have layers, donkey&quot;)</code> in it.</p><p>Now set your button onactivate to <code>DOTAGlobalSceneFireEntityInput(scene, donkey, RunScriptFile, donkey)</code>.</p><p>Notice the lack of file extension. Press the button again. You should see the message in the console. Congratulations!</p><p>But don&#x27;t get too excited. Yes, you can execute lua from panorama. But it&#x27;s <em>clientside</em>-lua and it&#x27;s <em>very</em> limited. You can&#x27;t even move things there. The only good thing I could think to do is particles. A recent patch added ParticleManager support to clientside lua. So theoretically you can create, destroy and move different particles there, and particles are very powerful.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="entity-parenting"></a>Entity parenting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#entity-parenting" title="Direct link to heading">#</a></h4><p>The way cosmetics in dota works is that every cosmetic item is a separate entity which is parented to a hero, attached to a specific attach point with specific offsets and offset angles. And we can do that too! (Well, partly, at least)</p><p>The way that works is you select a prop_dynamic, in object properties put up a parent entity name, put in the <code>Parent Model Bone/Attachment Name</code> (you can look up attachment names in the model editor), check the <code>Use Model Attachment Offset</code> checkbox and then realize that changing attachment offset doesn&#x27;t work. At least for now. Changing angles works though so there is hope that offset will be fixed someday.</p><p>That&#x27;s it for today!</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/panorama/keybindings"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Keybindings</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/panorama/hiding-hud-with-sethudvisible"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Hiding HUD with SetHUDVisible »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_tVyB"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background-maps" class="table-of-contents__link">Background maps</a><ul><li><a href="#setting-up-the-map" class="table-of-contents__link">Setting up the map</a></li><li><a href="#setting-up-panorama" class="table-of-contents__link">Setting up panorama</a></li></ul></li><li><a href="#the-part-where-magic-gets-real" class="table-of-contents__link">The part where magic gets real</a><ul><li><a href="#units-with-cosmetics" class="table-of-contents__link">Units with cosmetics</a></li><li><a href="#multiple-cameras" class="table-of-contents__link">Multiple cameras</a></li><li><a href="#dynamic-layout-loading" class="table-of-contents__link">Dynamic layout loading</a></li><li><a href="#firing-io-events" class="table-of-contents__link">Firing IO events</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/styles.d89c53e5.js"></script>
<script src="/runtime~main.6abb769e.js"></script>
<script src="/main.2e2eb0b8.js"></script>
<script src="/1.607a12f9.js"></script>
<script src="/2.90bd4da8.js"></script>
<script src="/1be78505.f231235a.js"></script>
<script src="/ec1ed54d.18c72637.js"></script>
<script src="/7bd703ab.d1393193.js"></script>
</body>
</html>